{% extends 'derb/base.html' %}

{% load static i18n %}

{% block main_block %}
  <div class="row">
    <div class="col-md-offset-2 col-md-8">
      <!-- Message Area -->
      {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
          <div class="alert alert-success">
            <strong>{% trans 'Success:' %}</strong> {{ message }}
          </div>
        {% endif %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
          <div class="alert alert-danger">
            <strong>{% trans 'Error:' %}</strong> {{ message }}
          </div>
        {% endif %}
      {% endfor %}

      <!-- Panel View -->
      <div class="panel panel-info">
        <div class="panel-heading">
          {% trans 'Multiple Selection Question (Admin)' %}
        </div>

        <div class="panel-body">
          <form action="{% url 'report_builder:multiple_selection_admin' report.pk question_pk %}" method="post">
            {% csrf_token %}
            <div class="row">
              <!-- Question Area -->
              <div class="col-md-8">
                <div> {{ form.text }} </div>
                <br/>
                <div> {{ form.help }} </div>
                <br/>

                <h4 align="center"><strong>{% trans 'Display fields' %}</strong></h4>
                <p><strong>{% trans 'Catalog:' %} </strong><span id="catalog_name"></span></p>
                <div id='display_fields'>
                  {{ form.display_fields }}
                </div>

              </div>

              <!-- Buttons Area -->
              <div class="col-md-4 question_option_panel text-center">
                <div class="btn-group">
                  <a class="btn btn-primary" onclick="toggle_help_input();">{% trans 'See/Hide' %}</a>
                  <a class="btn btn-danger" onclick="alert('To do');">{% trans 'Delete' %}</a>
                  <a class="btn btn-success" onclick="alert('To do');">#</a>
                </div>
                <br/><br/><br/>

                {% trans 'Requirement:' %} {{ form.required }}
                <br/><br/>

                {% trans 'Catalog:' %} {{ form.catalog }}
                <br/><br/><br/>

                {% trans 'Widget:' %} {{ form.widget }}
              </div>
            </div>

            <!-- Submit -->
            <div class="row text-right">
              <div class="col-md-12">
                <input class="btn btn-primary" type="submit" value="Save">
              </div>
            </div>

          </form>

        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block body_js %}
  <script>
    var catalog_url = "{% url 'report_builder:get_catalog_display_fields' %}";
    var answer_options_json = "{{ question.answer_options | escapejs }}";
  </script>
  <script src="{% static 'report_builder/js/derb_helpers.js' %}"></script>
  <script
    src="{% static 'report_builder/js/derb_subcomponents/question_types/multiple_selection_question.js' %}"></script>
{% endblock %}
